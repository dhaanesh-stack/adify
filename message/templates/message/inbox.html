{% extends 'base.html' %}
{% block content %}
  <div class="max-w-4xl mx-auto my-10">
    <h1 class="text-2xl font-bold mb-4">Inbox</h1>

    {% if conversations %}
      <ul class="divide-y divide-gray-200">
        {% for conv in conversations %}
          <li class="py-3 flex justify-between items-center">
            <div>
              <a href="{{ conv.chat_url }}" class="font-medium text-blue-600 hover:underline">{{ conv.ad__title }} - {{ conv.other_user_username }}</a>

              <p class="text-sm text-gray-500">Last message: {{ conv.last_msg_time|date:'M d, H:i' }}</p>
            </div>

            {% if conv.unread_count > 0 %}
              <span class="inline-block bg-red-500 text-white text-xs px-2 py-1 rounded-full">{{ conv.unread_count }} new</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No conversations yet.</p>
    {% endif %}
  </div>
{% endblock %}
