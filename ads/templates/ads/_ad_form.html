{% load widget_tweaks %}
<div 
  x-data="{
    category: '{{ form.category.value|default:'' }}',
    isEvent() {
      return this.category?.toLowerCase() === 'event';
    }
  }"
  x-init="() => { $watch('category', value => value || (category = '')); }"
>

  <div>
    <label for="id_title" class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
    {{ form.title | add_class:"w-full border border-gray-300 rounded-md p-2 outline-none focus:outline-indigo-500 focus:ring-2 focus:ring-indigo-500"| attr:"placeholder:Enter ad title"}}
  </div>

  <div>
    <label for="id_description" class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
    <textarea
      name="description"
      id="id_description"
      rows="4"
      class="w-full border border-gray-300 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"
    >{{ form.description.value }}</textarea>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
    <div>
      <label for="id_category" class="block text-sm font-medium text-gray-700 mb-1">Category *</label>
      <div x-on:change="category = $event.target.options[$event.target.selectedIndex].text.toLowerCase()">
        {{ form.category | add_class:"w-full border border-gray-300 rounded-md p-2 outline-none focus:outline-indigo-500 focus:ring-2 focus:ring-indigo-500"}}
      </div>
    </div>

    <div>
      <label for="id_price" class="block text-sm font-medium text-gray-700 mb-1">Price</label>
      {{ form.price|add_class:"w-full border border-gray-300 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"|attr:"placeholder:Enter price"  }}
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
    <div>
      <label for="id_location" class="block text-sm font-medium text-gray-700 mb-1">Location*</label>
      {{ form.location | add_class:"w-full border border-gray-300 rounded-md p-2 outline-none focus:outline-indigo-500 focus:ring-2 focus:ring-indigo-500" |attr:"placeholder:Enter location"}}
    </div>

    <div id="event-date-container" x-show="isEvent()" x-transition>
      <label for="id_event_date" class="block text-sm font-medium text-gray-700 mb-1">Event Date</label>
      <input
        type="date"
        name="event_date"
        id="id_event_date"
        value="{{ form.event_date.value }}"
        class="w-full border border-gray-300 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"
      />
    </div>
  </div>

  <div>
    <label for="id_image" class="block text-sm font-medium text-gray-700 mb-1">Upload Image</label>
    {{ form.image }}
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
    <div>
      <label for="id_contact_email" class="block text-sm font-medium text-gray-700 mb-1">Email*</label>
      {{ form.contact_email | add_class:"w-full border border-gray-300 rounded-md p-2 outline-none focus:outline-indigo-500 focus:ring-2 focus:ring-indigo-500" |attr:"placeholder:Enter email" }}
    </div>

    <div>
      <label for="id_contact_phone" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
      {{ form.contact_phone | add_class:"w-full border border-gray-300 rounded-md p-2 outline-none focus:outline-indigo-500 focus:ring-2 focus:ring-indigo-500" |attr:"placeholder:Enter phone number"}}
    </div>
  </div>

  <div class="flex items-center">
    {{ form.show_contact }}
    <label for="id_show_contact" class="ml-2 text-sm text-gray-700">Show my contact info publicly</label>
  </div>

  {% if form.instance.pk and form.instance.image %}
    <div class="mt-2">
      <p class="text-sm text-gray-500">Current Image:</p>
      <img src="{{ form.instance.image.url }}" alt="Current Image" class="h-40 object-cover rounded-md" />
    </div>
  {% endif %}
</div>
